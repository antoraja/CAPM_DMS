var attachRef;sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/core/Item"],(e,t,a,o)=>{"use strict";return e.extend("attachmenta5.controller.View1",{onInit(){var e=new a;this.getView().setModel(e,"attachmentItemsModel");attachRef=this;attachRef.loadAttachmentsList()},onUpload:function(e){var a=this.getView().byId("fileUploader");var o=a.oFileUpload.files;var s=this.getView().getModel("attachment");if(!o||o.length===0){sap.m.MessageToast.show("Please select a file first.");return}var r=o[0];var n=new FileReader;n.onload=function(e){var a=e.target.result;var o=(new Date).getTime()+r.name;var n=window.location.protocol+"//"+window.location.host;const i=r.type;var l={ID:"",content:a,filename:o,mime:i,url:n};s.create("/Attachments",l,{success:function(e,t){attachRef.loadAttachmentsList()},error:function(e){var a=e.message||(e.responseText?JSON.parse(e.responseText).error.message.value:"Unknown error");t.show("Error: "+a);console.log("Error upload File:",e)}})};n.readAsBinaryString(r)},loadAttachmentsList:async function(){var e=this.getView().getModel("attachmentItemsModel");var t=this.getOwnerComponent().getModel("attachment");var a="/Attachments";t.read(a,{success:function(t,a){e.setData({attachmentItems:t.results});console.log(e);e.setProperty("/created",false)},error:function(e){console.log("Error in Attachment list:",e)}})}})});
//# sourceMappingURL=View1.controller.js.map